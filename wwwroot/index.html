<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>ProfileApp</title>
    <base href="/funciona/" />
    <script>
        // Configuración de la ruta base para GitHub Pages
        (function() {
            // Forzar la ruta base a /funciona/ para GitHub Pages
            window.baseUrl = '/funciona/';
            document.getElementsByTagName('base')[0].href = window.baseUrl;
            
            // Redirigir si estamos en la raíz
            if (window.location.pathname === '/' || window.location.pathname === '/funciona') {
                window.location.href = window.baseUrl;
            }
        })();
    </script>
    <link rel="stylesheet" href="lib/bootstrap/dist/css/bootstrap.min.css" />
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css" />
    <link rel="stylesheet" href="css/app.css" />
    <link rel="icon" type="image/png" href="favicon.png" />
    <link href="ProfileApp.styles.css" rel="stylesheet" />
</head>
<body>
    <noscript>
        <div style="text-align: center; margin-top: 50px;">
            <h1>Se requiere JavaScript</h1>
            <p>Esta aplicación requiere JavaScript para funcionar correctamente. Por favor, habilita JavaScript en tu navegador.</p>
        </div>
    </noscript>

    <div id="app">
        <div style="display: flex; justify-content: center; align-items: center; height: 100vh;">
            <div class="spinner-border text-primary" role="status">
                <span class="visually-hidden">Cargando...</span>
            </div>
        </div>
    </div>

    <div id="blazor-error-ui" style="display: none;">
        <div class="alert alert-danger" role="alert">
            <h4 class="alert-heading">¡Ha ocurrido un error!</h4>
            <p>Se ha producido un error inesperado. Por favor, recarga la página para continuar.</p>
            <hr>
            <button onclick="location.reload()" class="btn btn-primary">Recargar</button>
        </div>
    </div>

    <script src="_framework/blazor.webassembly.js" autostart="false"></script>
    <script>
        // Cargar Blazor con configuración personalizada
        Blazor.start({
            loadBootResource: function (type, name, defaultUri, integrity) {
                // Asegurar que las rutas de los recursos sean correctas
                if (type === 'dotnetjs' || type === 'dotnetwasm' || type === 'timezonedata') {
                    return `${window.baseUrl}_framework/${name}`;
                }
                return defaultUri;
            }
        }).then(() => {
            console.log('Blazor cargado correctamente');
        }).catch(error => {
            console.error('Error al cargar Blazor:', error);
            document.getElementById('blazor-error-ui').style.display = 'block';
        });
    </script>
</body>
</html>
